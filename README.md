# ๐ Delayed Notifier

**Delayed Notifier** โ ััะพ ะผะธะบัะพัะตัะฒะธั ะดะปั **ะพัะปะพะถะตะฝะฝะพะน ะพัะฟัะฐะฒะบะธ ัะฒะตะดะพะผะปะตะฝะธะน** ัะตัะตะท Email ะธ Telegram.  
ะกะตัะฒะธั ะฟะพะดะดะตัะถะธะฒะฐะตั ะฟะปะฐะฝะธัะพะฒะฐะฝะธะต ัะฒะตะดะพะผะปะตะฝะธะน, ะฟัะพะฒะตัะบั ะธั ััะฐัััะฐ ะธ ะพัะผะตะฝั ะดะพ ะผะพะผะตะฝัะฐ ะพัะฟัะฐะฒะบะธ.  

```

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ


delayed_notifier/
โโโ cmd/
โ โโโ main.go # ะขะพัะบะฐ ะฒัะพะดะฐ ะฒ ะฟัะธะปะพะถะตะฝะธะต
โโโ db/
โ โโโ dumps/ # ะะธัะตะบัะพัะธั ะดะปั ะดะฐะผะฟะพะฒ (ัะตะทะตัะฒะฝัะต ะดะฐะฝะฝัะต)
โโโ internal/
โ โโโ app/
โ โ โโโ app.go # ะะฝะธัะธะฐะปะธะทะฐัะธั, ะทะฐะฟััะบ ะธ ะบะพะฝัะธะณััะฐัะธั ะฟัะธะปะพะถะตะฝะธั
โ โโโ cache/
โ โ โโโ cache.go # ะะฐะฑะพัะฐ ั Redis
โ โโโ handlers/
โ โ โโโ addNotice.go # POST /notify โ ัะพะทะดะฐะฝะธะต ัะฒะตะดะพะผะปะตะฝะธั
โ โ โโโ deleteNotice.go # DELETE /notify/:id โ ัะดะฐะปะตะฝะธะต ัะฒะตะดะพะผะปะตะฝะธั
โ โ โโโ getStatus.go # GET /notify/:id โ ะฟะพะปััะตะฝะธะต ััะฐัััะฐ ัะฒะตะดะพะผะปะตะฝะธั
โ โ โโโ router.go # ะะตะณะธัััะฐัะธั ะฒัะตั ะผะฐัััััะพะฒ (ะฒะบะปััะฐั web UI)
โ โโโ model/
โ โ โโโ model.go # ะะฟัะตะดะตะปะตะฝะธะต ััััะบััั ัะฒะตะดะพะผะปะตะฝะธะน ะธ ััะฐัััะพะฒ
โ โโโ notifier/
โ โ โโโ email/
โ โ โ โโโ email.go # ะัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน ะฟะพ Email
โ โ โโโ telegram/
โ โ โโโ telegram.go # ะัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน ะฒ Telegram
โ โโโ rabbitmq/
โ โ โโโ rabbit.go # ะะฐะฑะพัะฐ ั RabbitMQ (ะพัะตัะตะดั ะธ ะทะฐะดะตัะถะบะฐ)
โ โโโ service/
โ โ โโโ data_deleter/
โ โ โ โโโ service.go # ะฃะดะฐะปะตะฝะธะต ัะฒะตะดะพะผะปะตะฝะธะน
โ โ โโโ data_saver/
โ โ โ โโโ service.go # ะกะพััะฐะฝะตะฝะธะต ัะฒะตะดะพะผะปะตะฝะธะน
โ โ โโโ status_getter/
โ โ โโโ service.go # ะะพะปััะตะฝะธะต ััะฐัััะฐ ัะฒะตะดะพะผะปะตะฝะธั
โ โโโ storage/
โ โโโ storage.go # ะะฐะฑะพัะฐ ั ััะฐะฝะธะปะธัะตะผ (ะธะฝัะตะณัะฐัะธั Redis + ะบะตั)
โโโ temp/ # ะัะตะผะตะฝะฝัะต ัะฐะนะปั, ะปะพะณะธ
โโโ web/
โ โโโ index.html # ะัะพััะพะน UI ะดะปั ัะตััะธัะพะฒะฐะฝะธั (HTML + JS)
โโโ Dockerfile
โโโ docker-compose.yml
โโโ README.md


```

## โ๏ธ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ

โ ะะปะฐะฝะธัะพะฒะฐะฝะธะต ัะฒะตะดะพะผะปะตะฝะธะน ั ัะพัะฝัะผ ะฒัะตะผะตะฝะตะผ (`send_at`)  
โ ะะพะดะดะตัะถะบะฐ ะพัะฟัะฐะฒะบะธ ัะตัะตะท **Email** ะธ **Telegram**  
โ ะฅัะฐะฝะตะฝะธะต ะดะฐะฝะฝัั ะธ ััะฐัััะพะฒ ะฒ **Redis**  
โ ะัะตัะตะดั ะทะฐะดะฐั ะธ ะพัะปะพะถะตะฝะฝะฐั ะพัะฟัะฐะฒะบะฐ ัะตัะตะท **RabbitMQ**  
โ ะะพะฒัะพัะฝัะต ะฟะพะฟััะบะธ ะพัะฟัะฐะฒะบะธ ั ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝะพะน ะทะฐะดะตัะถะบะพะน  
โ ะัะพััะพะน **ะฒะตะฑ-ะธะฝัะตััะตะนั** (`web/index.html`) ะดะปั ัะตััะธัะพะฒะฐะฝะธั  

---

## โ๏ธ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต ัะตะฟะพะทะธัะพัะธั

```bash
git clone https://github.com/Vladimirmoscow84/delayed_notifier.git
cd delayed_notifier

2. ะกะพะทะดะฐะนัะต .env ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ
SERVER_ADDRESS=:7540
REDIS_URI=redis://redis:6379
RABBIT_URI=amqp://user:password@rabbitmq:5672/
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USER=user@example.com
EMAIL_PASS=password
EMAIL_FROM=user@example.com
EMAIL_TO=recipient@example.com
TELEGRAM_TOKEN=123456:ABC-DEF
TELEGRAM_CHAT_ID=987654321

ะฃะบะฐะถะธัะต ัะตะฐะปัะฝัะต SMTP-ะดะฐะฝะฝัะต, ััะพะฑั ัะตััะธัะพะฒะฐัั ะพัะฟัะฐะฒะบั ะฟะธัะตะผ.
Telegram ะผะพะถะฝะพ ะพัะบะปััะธัั, ะพััะฐะฒะธะฒ ัะพะบะตะฝ ะธ chat_id ะฟััััะผะธ.

3. ะะฐะฟััะบ ัะตัะตะท Docker Compose
docker-compose build --no-cache
docker-compose up -d

 ะะพัะปะต ะทะฐะฟััะบะฐ:
| ะะพะผะฟะพะฝะตะฝั   | ะะดัะตั                                                        | ะะฐะทะฝะฐัะตะฝะธะต                      |
| ----------- | ------------------------------------------------------------ | ------------------------------- |
| Web UI      | [http://localhost:7540](http://localhost:7540)               | ะกะพะทะดะฐะฝะธะต ะธ ะฟัะพัะผะพัั ัะฒะตะดะพะผะปะตะฝะธะน |
| RabbitMQ UI | [http://localhost:15672](http://localhost:15672)             | ะัะตัะตะดะธ ะธ ัะพะพะฑัะตะฝะธั             |
| Redis       | localhost:6379                                               | ะฅัะฐะฝะธะปะธัะต ัะฒะตะดะพะผะปะตะฝะธะน           |
| API         | [http://localhost:7540/notify](http://localhost:7540/notify) | REST API                        |

ะะตะฑ-ะธะฝัะตััะตะนั

ะััั: web/index.html
ะัะบัััั ะฒ ะฑัะฐัะทะตัะต: http://localhost:7540

ะคัะฝะบัะธะธ ะธะฝัะตััะตะนัะฐ:

ะกะพะทะดะฐัั ัะฒะตะดะพะผะปะตะฝะธะต (POST /notify)

ะัะพะฒะตัะธัั ััะฐััั (GET /notify/:id)

ะฃะดะฐะปะธัั ัะฒะตะดะพะผะปะตะฝะธะต (DELETE /notify/:id)

 REST API
โถPOST /notify โ ัะพะทะดะฐะฝะธะต ัะฒะตะดะพะผะปะตะฝะธั

ะัะธะผะตั ะทะฐะฟัะพัะฐ:
{
  "subject": "ะะฐะฟะพะผะธะฝะฐะฝะธะต",
  "body": "ะะพะทะฒะพะฝะธัั ะบะปะธะตะฝัั ะฒ 15:00",
  "send_at": "2025-10-21T15:00:00Z"
}
ะัะฒะตั:
{
  "id": "1",
  "status": "scheduled",
  "send_at": "2025-10-21T15:00:00Z"
}
 GET /notify/{id} โ ััะฐััั ัะฒะตะดะพะผะปะตะฝะธั

ะัะฒะตั:
{
  "id": "1",
  "status": "scheduled",
  "subject": "ะะฐะฟะพะผะธะฝะฐะฝะธะต",
  "body": "ะะพะทะฒะพะฝะธัั ะบะปะธะตะฝัั ะฒ 15:00",
  "send_at": "2025-10-21T15:00:00Z"
}
 DELETE /notify/{id} โ ะพัะผะตะฝะฐ ัะฒะตะดะพะผะปะตะฝะธั

ะัะฒะตั:
{
  "id": "1",
  "status": "deleted"
}

ะัะธะฝัะธะฟ ัะฐะฑะพัั
1๏ธโฃ ะะปะธะตะฝั (UI / API) ะพัะฟัะฐะฒะปัะตั POST /notify ั ะฒัะตะผะตะฝะตะผ ะพัะฟัะฐะฒะบะธ (send_at)
2๏ธโฃ ะกะตัะฒะธั ัะพััะฐะฝัะตั ัะฒะตะดะพะผะปะตะฝะธะต ะฒ Redis
3๏ธโฃ ะฃะฒะตะดะพะผะปะตะฝะธะต ะฟัะฑะปะธะบัะตััั ะฒ RabbitMQ ั ะพัะปะพะถะตะฝะฝะพะน ะดะพััะฐะฒะบะพะน
4๏ธโฃ ะะพะณะดะฐ ะฝะฐัััะฟะฐะตั ะฒัะตะผั, ะฒะพัะบะตั ะธะทะฒะปะตะบะฐะตั ัะพะพะฑัะตะฝะธะต
5๏ธโฃ ะกะตัะฒะธั ะพัะฟัะฐะฒะปัะตั ัะฒะตะดะพะผะปะตะฝะธะต ะฟะพ Email ะธะปะธ Telegram
6๏ธโฃ ะกัะฐััั ะพะฑะฝะพะฒะปัะตััั ะฒ Redis

 ะขะตัะฝะพะปะพะณะธะธ
| ะะพะผะฟะพะฝะตะฝั            | ะะฐะทะฝะฐัะตะฝะธะต                       |
| -------------------- | -------------------------------- |
| **Go (Golang)**      | ะัะฝะพะฒะฝะพะน ัะทัะบ                    |
| **Redis**            | ะฅัะฐะฝะธะปะธัะต ัะฒะตะดะพะผะปะตะฝะธะน ะธ ััะฐัััะพะฒ |
| **RabbitMQ**         | ะัะตัะตะดั ะทะฐะดะฐั ั TTL (ะทะฐะดะตัะถะบะพะน)  |
| **SMTP (Email)**     | ะัะฟัะฐะฒะบะฐ ะฟะธัะตะผ                   |
| **Telegram Bot API** | ะัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธะน ะฒ Telegram    |
| **Gin**              | HTTP API                         |
| **Docker Compose**   | ะะพะฝัะตะนะฝะตัะธะทะฐัะธั ะฒัะตั ัะตัะฒะธัะพะฒ    |
| **HTML + JS**        | ะะตะฑ-ะธะฝัะตััะตะนั                    |

ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ ัะตัะตะท curl
ะกะพะทะดะฐะฝะธะต ัะฒะตะดะพะผะปะตะฝะธั
curl -X POST http://localhost:7540/notify \
-H "Content-Type: application/json" \
-d '{"subject":"ะขะตัั","body":"ะกะพะพะฑัะตะฝะธะต","send_at":"2025-10-21T15:00:00Z"}'

ะัะพะฒะตัะบะฐ ััะฐัััะฐ
curl http://localhost:7540/notify/1

ะฃะดะฐะปะตะฝะธะต ัะฒะตะดะพะผะปะตะฝะธั
curl -X DELETE http://localhost:7540/notify/1

ะะพะฟะพะปะฝะธัะตะปัะฝะพ

ะะพะณะธ ะผะพะถะฝะพ ะฟะธัะฐัั ะฒ /temp/

ะัะต ะฒัะตะผะตะฝะฝัะต ัะฐะนะปั โ ะฒ /temp/

Redis ะผะพะถะฝะพ ัะฑัะพัะธัั ะบะพะผะฐะฝะดะพะน:
docker exec -it redis_server redis-cli flushall

ะััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ
                    โโโโโโโโโโโโโโโโโโโโโโ
                    โ   Web UI / API     โ
                    โ  (index.html, /notify) โ
                    โโโโโโโโโโโโฌโโโโโโโโโโ
                               โ POST /notify
                               โผ
                      โโโโโโโโโโโโโโโโโโโโ
                      โ   Handlers       โ
                      โ  (addNotice etc) โ
                      โโโโโโโโโโโโฌโโโโโโโโโ
                                 โ
                                 โผ
                        โโโโโโโโโโโโโโโโโ
                        โ    Redis      โ
                        โ  (Storage)    โ
                        โโโโโโโโฌโโโโโโโโโ
                               โ
                               โผ
                       โโโโโโโโโโโโโโโ
                       โ  RabbitMQ   โ
                       โ  (Queue + TTL) โ
                       โโโโโโโโฌโโโโโโโโโ
                              โ (ะฟะพ ะธััะตัะตะฝะธะธ TTL)
                              โผ
                โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ   Notifier Service         โ
                โ  (Email + Telegram Sender) โ
                โโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโ
                           โ
                           โผ
                     ๐ฌ ะะพะปััะฐัะตะปั ัะฒะตะดะพะผะปะตะฝะธั



ะะธัะตะฝะทะธั
MIT ยฉ 2025 โ VladimirMoscow84
