üïí Delayed Notifier

Delayed Notifier ‚Äî —ç—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —á–µ—Ä–µ–∑ Email –∏ Telegram.
–°–µ—Ä–≤–∏—Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –ø—Ä–æ–≤–µ—Ä–∫—É –∏—Ö —Å—Ç–∞—Ç—É—Å–∞ –∏ –æ—Ç–º–µ–Ω—É –¥–æ –º–æ–º–µ–Ω—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏.

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

delayed_notifier/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ main.go                      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îî‚îÄ‚îÄ dumps/                       # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –¥–∞–º–ø–æ–≤ (—Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.go                   # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –∑–∞–ø—É—Å–∫ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ cache/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cache.go                 # –†–∞–±–æ—Ç–∞ —Å Redis
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ addNotice.go             # POST /notify ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deleteNotice.go          # DELETE /notify/:id ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ getStatus.go             # GET /notify/:id ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ router.go                # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è web UI)
‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ model.go                 # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ notifier/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ email.go             # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ Email
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ telegram.go          # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ rabbitmq/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rabbit.go                # –†–∞–±–æ—Ç–∞ —Å RabbitMQ (–æ—á–µ—Ä–µ–¥—å –∏ –∑–∞–¥–µ—Ä–∂–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_deleter/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service.go           # –£–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data_saver/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ service.go           # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ status_getter/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ service.go           # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ storage/
‚îÇ       ‚îî‚îÄ‚îÄ storage.go               # –†–∞–±–æ—Ç–∞ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Redis + –∫–µ—à)
‚îú‚îÄ‚îÄ temp/                            # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã, –ª–æ–≥–∏
‚îú‚îÄ‚îÄ web/
‚îÇ   ‚îî‚îÄ‚îÄ index.html                   # –ü—Ä–æ—Å—Ç–æ–π UI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (HTML + JS)
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ README.md

‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å —Ç–æ—á–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º (send_at)
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Email –∏ Telegram
‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ Redis
‚úÖ –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ RabbitMQ
‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
‚úÖ –ü—Ä–æ—Å—Ç–æ–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (web/index.html) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/Vladimirmoscow84/delayed_notifier.git
cd delayed_notifier

2. –°–æ–∑–¥–∞–π—Ç–µ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
SERVER_ADDRESS=:7540
REDIS_URI=redis://redis:6379
RABBIT_URI=amqp://user:password@rabbitmq:5672/
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USER=user@example.com
EMAIL_PASS=password
EMAIL_FROM=user@example.com
EMAIL_TO=recipient@example.com
TELEGRAM_TOKEN=123456:ABC-DEF
TELEGRAM_CHAT_ID=987654321


‚ö†Ô∏è –£–∫–∞–∂–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ SMTP-–¥–∞–Ω–Ω—ã–µ, —á—Ç–æ–±—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø–∏—Å–µ–º.
Telegram –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å, –æ—Å—Ç–∞–≤–∏–≤ —Ç–æ–∫–µ–Ω –∏ chat_id –ø—É—Å—Ç—ã–º–∏.

3. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
docker-compose build --no-cache
docker-compose up -d


üì° –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	          –ê–¥—Ä–µ—Å	                  –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Web UI	     http://localhost:7540         –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
RabbitMQ UI	  http://localhost:15672       –û—á–µ—Ä–µ–¥–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
Redis	         localhost:6379	           –•—Ä–∞–Ω–∏–ª–∏—â–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
API	       http://localhost:7540/notify    REST API

üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü—É—Ç—å: web/index.html
–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:7540

–§—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:
    -–°–æ–∑–¥–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (POST /notify)
    -–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å (GET /notify/:id)
    -–£–¥–∞–ª–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (DELETE /notify/:id)

üì° REST API

‚ñ∂Ô∏è POST /notify ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

{
  "subject": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
  "body": "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É –≤ 15:00",
  "send_at": "2025-10-21T15:00:00Z"
}


–û—Ç–≤–µ—Ç:

{
  "id": "1",
  "status": "scheduled",
  "send_at": "2025-10-21T15:00:00Z"
}

üìã GET /notify/{id} ‚Äî —Å—Ç–∞—Ç—É—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–û—Ç–≤–µ—Ç:

{
  "id": "1",
  "status": "scheduled",
  "subject": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
  "body": "–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É –≤ 15:00",
  "send_at": "2025-10-21T15:00:00Z"
}

‚ùå DELETE /notify/{id} ‚Äî –æ—Ç–º–µ–Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–û—Ç–≤–µ—Ç:

{
  "id": "1",
  "status": "deleted"
}

üîÑ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
1Ô∏è‚É£ –ö–ª–∏–µ–Ω—Ç (UI / API) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /notify —Å –≤—Ä–µ–º–µ–Ω–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ (send_at)
2Ô∏è‚É£ –°–µ—Ä–≤–∏—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Redis
3Ô∏è‚É£ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ RabbitMQ —Å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π
4Ô∏è‚É£ –ö–æ–≥–¥–∞ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –≤—Ä–µ–º—è, –≤–æ—Ä–∫–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
5Ô∏è‚É£ –°–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ Email –∏–ª–∏ Telegram
6Ô∏è‚É£ –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ Redis

üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	              –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
Go (Golang)	              –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
Redis	                  –•—Ä–∞–Ω–∏–ª–∏—â–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤
RabbitMQ	              –û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á —Å TTL (–∑–∞–¥–µ—Ä–∂–∫–æ–π)
SMTP (Email)	          –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º
Telegram Bot API	      –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram
Gin	                      HTTP API
Docker Compose	          –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
HTML + JS	              –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å


–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ curl
–°–æ–∑–¥–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
curl -X POST http://localhost:7540/notify \
-H "Content-Type: application/json" \
-d '{"subject":"–¢–µ—Å—Ç","body":"–°–æ–æ–±—â–µ–Ω–∏–µ","send_at":"2025-10-21T15:00:00Z"}'

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
curl http://localhost:7540/notify/1

–£–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
curl -X DELETE http://localhost:7540/notify/1

üßæ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

–õ–æ–≥–∏ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ /temp/

–í—Å–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã ‚Äî –≤ /temp/

Redis –º–æ–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π:

docker exec -it redis_server redis-cli flushall

üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ¬© 2025 ‚Äî VladimirMoscow84